<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3c.org/TR/1999/REC-html401-19991224/loose.dtd">
<HTML xmlns:fb = "http://www.facebook.com/2008/fbml">
<HEAD profile=http://purl.org/NET/erdf/profile>
<TITLE>StumbleUpon - Create Your Personal Account</TITLE>
<META http-equiv=Content-Type content="text/html; charset=iso-8859-1">
<META
content="Discover your web with StumbleUpon. It's the best way to discover the things you like on the web."
name=description>
<META content=", stumbleupon, stumbleupon.com, stumble" name=keywords><LINK
href="http://cdn.stumble-upon.com/favicon.ico" type="image/x-icon" rel="shortcut icon">
<%= stylesheet_link_tag "screen_0708" %>
<LINK href="http://purl.org/dc/elements/1.1/"
rel=schema.dc><LINK href="http://search.yahoo.com/mrss/" rel=schema.media><LINK
href="http://www.w3.org/2000/01/rdf-schema#" rel=schema.rdfs><LINK
href="http://search.yahoo.com/searchmonkey-relation/" rel=schema.rel><LINK
href="http://search.yahoo.com/searchmonkey/reference/" rel=schema.reference>
<SCRIPT
src="/javascripts/jquery-1.2.6.min.js"
type=text/javascript></SCRIPT>

<SCRIPT src="/javascripts/base.js"
type=text/javascript></SCRIPT>

<SCRIPT
src="/javascripts/yahoo.js"
type=text/javascript></SCRIPT>

<SCRIPT
src="/javascripts/connection.js"
type=text/javascript></SCRIPT>

<SCRIPT
src="/javascripts/event.js"
type=text/javascript></SCRIPT>

<SCRIPT type="text/javascript">
	var SERVERDOM = ".stumbleupon.com";

	function trk(u) {
		if (document.images)
			(new Image).src=u;
		return true;
	}

	</SCRIPT>

<SCRIPT type=text/javascript>

    function flip_profile_version()
    {
		$("#flip_to_new_profile_page").submit();
    }

</SCRIPT>
<META content="MSHTML 6.00.6001.18248" name="GENERATOR">
</HEAD>
<BODY>
<DIV class=headerWrapper align=center>
<DIV class=wrapperFixedSm align=left>
<DIV id=logo><A class=png id=logoLink
href="http://www.stumbleupon.com/">&nbsp;</A>
<H2><A href="http://www.stumbleupon.com/">StumbleUpon</A></H2>
<P><A href="http://www.stumbleupon.com/">Discover your web</A></P></DIV>
<DIV class="right pdgTopLg form" align=right>
<DIV class="pdgTopSm pdgBottomXSm textNowrap"><SPAN class=textGray>已经注册?</SPAN> <A class=textUl
href="/user/login">登录.</A>
</DIV></DIV></DIV></DIV>
<DIV class="clear"><!-- --> </DIV>
<DIV class="nav" style="HEIGHT: 10px" align="center">
<DIV class=wrapperFixedSm align="center"></DIV></DIV>
<SCRIPT type="text/javascript">
	var fauth = '4a63027c737b69.41779995';

	if (navigator.userAgent.indexOf('MSIE') > -1)
	{
		if (document.documentElement.offsetHeight && document.documentElement.offsetHeight < 406)
		{
			var diff = 406 - document.documentElement.offsetHeight;
			var newY = diff * -1;
			var newWidth = document.documentElement.offsetWidth + 2;
			window.moveBy(0,newY);
			window.resizeTo(newWidth, 600);
		}
	}

function textEventHandler(e,target)
{
	// Get the id of the text box
	var targetid = this.id;

	// Get the contents of the text box
	var textvalue = document.getElementById(targetid).value;

	// If the textbox is empty don't do any validation
	if(textvalue == '')
		return;
	else
		checkAvail(targetid);
}

function checkAvail(inputType)
{
	var callback = {
			success : function (o) {
			var lvl = o.responseText;
			var resultDiv;

			// Hide the error div that is generated by backend
			var errorDiv = document.getElementById(inputType + 'Error');
			if (errorDiv)
				errorDiv.style.display = 'none';

			var img = document.getElementById(inputType + '_check');

			if(lvl == 'invalid')
			{
				document.getElementById(inputType + '_err_' + 'already_exists').style.display='none';
				document.getElementById(inputType + '_err_' + lvl).style.display='block';
				img.src = 'images/icon_warning.gif';
			}
			else if(lvl == 'already_exists')
			{
				document.getElementById(inputType + '_err_' + 'invalid').style.display='none';
				document.getElementById(inputType + '_err_' + lvl).style.display='block';
				img.src = 'images/icon_warning.gif';
			}
			else
			{
				img.src = 'images/icon_accept.gif';
				document.getElementById(inputType + '_err_' + 'already_exists').style.display='none';
				document.getElementById(inputType + '_err_' + 'invalid').style.display='none';
			}
		},
		failure : function (o) {
		},
		timeout : 10000
	}

	var check_item = document.getElementById(inputType).value;
	// Do custom encoding for "+" ,replace "+" with %2B so that it does not get automatically converted to space
	check_item = check_item.replace('+', '%2B');

	var params = 'item_type=' + inputType + '&check_item='+ check_item + '&ftoken='+fauth;
	YAHOO.util.Connect.asyncRequest('POST','check_availability.php', callback, params);
}

function generalEventHandler()
{
	var target_id = this.id;
	var inputType = this.id;
	var params = 'item_type=' + inputType + '&ftoken='+fauth;
	YAHOO.util.Connect.asyncRequest('POST','check_availability.php', '', params);
}

// Register event for email and user name text boxes blur events(when the email or user name text inputs go out of focus)
YAHOO.util.Event.addListener("nick", "blur", textEventHandler);
YAHOO.util.Event.addListener("email", "blur", textEventHandler);
YAHOO.util.Event.addListener("bmonth", "focus", generalEventHandler);
YAHOO.util.Event.addListener("bday", "focus", generalEventHandler);
YAHOO.util.Event.addListener("byear", "focus", generalEventHandler);

	function delayedRedirect(){
			window.location = "/download_autostart.php?type=ie"
	}


	</SCRIPT>

<DIV class=wrapperFixedSm id=wrapper>
<H1 class=pdgTop>Login or Sign Up now to discover great sites! </H1>
<% form_for :user,@user,:url=> {:action=>"sign_up"}, :id=>"signupForm", :onsubmit=>"return pwCheck();" do |f| %>
<TABLE class=main cellSpacing=0 cellPadding=0 border=0>
  <TBODY>
  <TR>
    <TD>
      <DIV class="round error" style="DISPLAY: none">
      <DIV class=roundHead>
      <P>Uh oh. 请帮助我们修正以下问题.</P></DIV>
      <DIV class=roundBottom><!-- --></DIV></DIV>
      <DIV class=form><INPUT type=hidden value=1 name=signup> <INPUT type=hidden
      value=0 name=ask_pwd>
      <P class=fieldLabel>请输入Email</P>
      <P class=error style="DISPLAY: none">请输入Email (i.e.,john@stumbleupon.com)</P>
      <INPUT class=inputXLg id=email tabIndex=1 maxLength=64 size=30 name="user[email]">
      <IMG id=email_check
      style="MARGIN-TOP: -2px; VERTICAL-ALIGN: middle; WIDTH: 16px; HEIGHT: 16px"
      alt="The username is available"
      src="/images/s.gif">
      <DIV class=textError id=email_err_invalid style="DISPLAY: none">Email地址无效. </DIV>
      <DIV class=textError id=email_err_already_exists style="DISPLAY: none">Email地址已经存在. <A
      href="http://www.stumbleupon.com/login.php">登录</A> </DIV>
      <P class="fieldLabel pdgTopSm">请输入用户名 <SPAN
      class=textNoEm>(以后不可更改)</SPAN></P>
      <INPUT class=inputXLg id=nick tabIndex=2 maxLength=16 size=30 name="user[name]">
      <IMG id=nick_check
      style="MARGIN-TOP: -2px; VERTICAL-ALIGN: middle; WIDTH: 16px; HEIGHT: 16px"
      alt="The username is available"
      src="/images/s.gif">
      <DIV class=textError id=nick_err_invalid style="DISPLAY: none">只能输入字母和数字. </DIV>
      <DIV class=textError id=nick_err_already_exists style="DISPLAY: none">用户名已经存在，请试试别的. </DIV>
      <P class="fieldLabel pdgTopSm">请输入密码 <SPAN class=textNoEm>(6
      to 16 characters, A-z, 0-9)</SPAN></P>
      <INPUT class="inputXLg left"
      id=password onkeyup="pwStrength(this)"
      onfocus="$('#passwordStrength1').show();" tabIndex=2 type=password
      maxLength=16 onchange="pwStrength(this)" size=30 name="user[password]">
      <DIV id=passwordStrength1 style="DISPLAY: none">
      <DIV id=tiny_meter>
      <H4>密码强度</H4>
      <DIV id=meter>
      <DIV id=meter1 style="BACKGROUND-COLOR: white"><!-- --></DIV>
      <DIV id=meter2 style="BACKGROUND-COLOR: white"><!-- --></DIV>
      <DIV id=meter3 style="BACKGROUND-COLOR: white"><!-- --></DIV>
      <DIV id=meter4
      style="BACKGROUND-COLOR: white"><!-- --></DIV></DIV></DIV></DIV>
      <DIV class=clear><!-- --></DIV>
      <DIV id=passwordError></DIV>
      <DIV class="left pdgRightLg pdgTopSm">
      <P class=fieldLabel>请选择你的生日</P>
        <%= date_select("user", "birthday",:order => [:year, :month,:day],
          :start_year=>1920,:use_month_numbers => true,
          :prompt => { :day => '日', :month => '月', :year => '年' }) %>
      </DIV>
      <DIV class="pdgLeftLg pdgTopSm left">
      <P class=fieldLabel>性别</P><INPUT id=gender_male tabIndex=6 type=radio
      value=1 name="user[gender]"><LABEL for=gender_male>男</LABEL> <INPUT
      id=gender_female tabIndex=7 type=radio value=2 name="user[gender]"><LABEL
      for=gender_female>女</LABEL> </DIV>
      <DIV class="clear pdgTopSm"><!-- --></DIV>
 
      <DIV class="form clear pdgTop">
      <DIV class="left pdgRightLg"><INPUT class=btnGreenLg style="WIDTH: 180px" tabIndex=9 type=submit value="注册 >">
      </DIV>
      <DIV class=pdgTopSm>
      <DIV class=textDisabled><INPUT id=searchlinks tabIndex=-1 type=checkbox
      CHECKED value=1 name="user[searchlinks]"><LABEL for=searchlinks>显示用户评论在搜索结果中</LABEL> </DIV>
      <DIV class="pdgTopSm textDisabled"><INPUT id=allow_search tabIndex=-1
      type=checkbox CHECKED value=1 name="user[allow_search]"><LABEL
      for=allow_search>可以通过Email找到我</LABEL>
      </DIV></DIV></DIV>
      <% end %>
      </TD>
    </TR></TBODY></TABLE>
<DIV class="pdgTop mgnTop clear" style="COLOR: #bbb9ab">By clicking "Join", you
are indicating that you have read, understood, and agree to <BR>StumbleUpon's <A
style="COLOR: #bbb9ab" href="http://www.stumbleupon.com/terms.html"
target=_blank>User Agreement</A> and <A style="COLOR: #bbb9ab"
href="http://www.stumbleupon.com/privacy.html" target=_blank>Privacy Policy</A>.
</DIV></DIV>
<SCRIPT type="text/javascript">
var eaf = document.getElementById('username');
if (eaf)
	eaf.focus();
</SCRIPT>

<DIV class="pdgTop clear"><!-- --></DIV>
<SCRIPT type="text/javascript">
var tp_variation = "baaihba";
var pw_ok = false;

function pwStrength(input)
{   
	var score = 0;
	var pass = $(input).val();
	if (pass.length < 6)
		score = score-100;
	if (pass.match(/.*(stumble|password).*/))
		score = score - 5;
	if (pass.length > 7)
		score = score + 4;
	if (pass.length > 9)
		score = score + 3;
	if (pass.match(/\d+/))
		score = score + 3;
	if (pass.match(/[A-Z]+/))
		score = score + 3;
	if (pass.match(/[a-z]+.*[A-Z]+.*[a-z]+/))
		score = score + 10;
	if (pass.match(/[A-Za-z]+[0-9]+[A-Za-z]+/))
		score = score + 10;
	if (pass.match(/^[^A-Z0-9]{0,3}[a-z]+[A-Z0-9]+[^A-Z0-9]{0,3}$/))
		score = score + 10;

	// alphanumeric only please
	if (pass.match(/[^a-zA-Z0-9]+/))
	{
		score = 0;
		$('#passwordError').html('Letters and numbers only, please').addClass("textError").fadeOut(200,function() { $(this).fadeIn(800) });
	}


	if (score < 10)
	{
		pw_ok = false;
		$("#meter div").css('background-color','white');
		if (score > 2)
			$('#meter1').css('background-color','#88E05C');
	}
	else
	{
		pw_ok = true;
		$('#passwordError').html('');
		if (score < 15)
		{
			$("#meter1,#meter2").css('background-color','#88E05C');
			$("#meter3,#meter4").css('background-color','white');
		}
		else if (score < 20)
		{
			$("#meter1,#meter2,#meter3").css('background-color','#88E05C');
			$("#meter4").css('background-color','white');
		}
		else
		{
			$("#meter div").css('background-color','#88E05C');
		}
	}
}
function pwCheck()
{
	pwStrength(document.getElementById('password'));
	if (!pw_ok)
	{
		$('#passwordError').html('Password is too weak').addClass("textError").fadeOut(200,function() { $(this).fadeIn(800) });
	}
	return pw_ok;
}
window.setTimeout(function() { pwStrength(document.getElementById('password')); },1000);

</SCRIPT>

<DIV class=footer style="BACKGROUND-COLOR: transparent" align=center>
<DIV class=wrapperFlex align=center>
<DIV class=clear><!-- --></DIV></DIV>
<P class="clear pdgTop pdgBottomSm textDisabled textSm" align=center>?
StumbleUpon 2001-2009 </P></DIV>
<DIV id=sidePanel style="DISPLAY: none; TOP: 32px">
<DIV id=spLoading><IMG alt=Loading...
src="/images/loader_dark.gif"></DIV><IFRAME
id=spFrame style="WIDTH: 250px; HEIGHT: 100%" name=spFrame src="about:blank"
frameBorder=0 noResize></IFRAME></DIV>
<SCRIPT type="text/javascript">

	jQuery(document).ready(function() {

		jQuery('a.tips').cluetip({
			cluetipClass: 'jtip',
			dropshadow: false,
			showTitle: false,
			splitTitle: '|',
			arrows: true,
			width: 150,
			dropShadow: false,
			hoverIntent: {
							  sensitivity:  3,
							  interval:     400,
							  timeout:      0
			}
		});

		// Stumble Search
		$('#stumble_search').click(function() {
			var q = $('#search_q').val();
			//var hash = q ? '#search=' + q : '';
			var hash = q ? 'search:' + q : '';

			//window.location = 'http://www' + SERVERDOM + '/s/' + hash;
			window.location = 'http://www' + SERVERDOM + '/s/#/' + hash;
		});

		// Scroll Follow Side Panel
		var spoffset = -32;
		if($('#expandedToolbar').length == 0)
		{
			spoffset = 0;
			$('#sidePanel').css('top',0);
		}

		$('#sidePanel').scrollFollow({
			offset:spoffset
		});

	});

</SCRIPT>

<SCRIPT
src="/javascripts/s_code.js"
type=text/javascript></SCRIPT>

<SCRIPT type=text/javascript><!--
s.pageName="Reg Flow: Sign Up Form Non Invite IE";
s.eVar9 = 'Visitor';
s.eVar8 = 'ie';
s.prop9 = 'Visitor';
s.prop8 = 'ie';
if(window.tp_variation !== undefined && window.tp_variation != ""){s.prop10=tp_variation;s.eVar10=tp_variation;}
if(window.hp_variation !== undefined && window.hp_variation != ""){s.pageName=hp_variation;}
var s_code=s.t();if(s_code)document.write(s_code)//-->
</SCRIPT>
<!-- Start Quantcast tag -->
<SCRIPT
src="/javascripts/quant.js"
type=text/javascript></SCRIPT>

<SCRIPT type=text/javascript>_qacct="p-dez5MJMQSF95o";quantserve();</SCRIPT>
<NOSCRIPT><A href="http://www.quantcast.com/p-dez5MJMQSF95o" target=_blank><IMG
style="DISPLAY: none" height=1 alt=Quantcast
src="/images/p-dez5MJMQSF95o.gif"
width=1 border=0></A> </NOSCRIPT><!-- End Quantcast tag --></BODY></HTML>
